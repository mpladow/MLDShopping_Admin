
@{
    @model List<MLDShopping_Admin.Models.CategoryVM>;
    ViewData["Title"] = "Category";
}

    <section class="content container-fluid">
        <div class="row mt-3">
            <div class="col-12">
                <div class="card w-100">
                    <div class="card-body p-4">
                        <button class="btn btn-primary btn-sm mb-3" onclick="window.location.href = '@Url.Action("Edit", "Category", new { Areas = "Products" })';">Add New Category</button>

                        <table class="table table-bordered table-hover dataTable dtr-inline mt-3" id="tblCategories" width="100%">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Category Id</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>

                    </div>
                </div>

            </div>
        </div>

    </section>

@section scripts {
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.5/js/jquery.dataTables.js"></script>

    <script language="javascript">
        $(document).ready(function () {
            var table = $("#tblCategories").DataTable({
                paging: true,
                responsive: true,
                serverSide: true,
                autoWidth: true,
                ajax: {
                    url: "@Url.Action("Read", "Category", new { area = "Products"})",
                    type: "POST",
                    contentType: "application/json",
                    data: function (d) {
                        return JSON.stringify(d);
                    },
                    dataSrc: function (json) {
                        console.log(json);
                        if (json.data)
                            return json.data;
                        else
                            return [];
                    }
                },
                columns: [
                    { data: "CategoryId", "autoWidth": true },
                    { data: "Name", "autoWidth": true },
                    { data: "Description", "autoWidth": true },
                    {
                        data: "CategoryId",
                        render: function (data, type, account) {
                            return '<a href="/products/category/edit/' + data + '">Edit</a>';
                        },
                        "autoWidth": true
                    }

                ],
                "language": {
                    "search": "",
                    "searchPlaceholder": "Search..."
                },
            });
        })
    </script>


}