
@{
    @model List<MLDShopping_Admin.Models.CategoryVM>;
    ViewData["Title"] = "Category";
}



<section class="content container-fluid">
    <div class="row mt-3">
        <div class="col-12">
            <div class="row">
                <div class="card w-100">
                    <div class="card-body p-4">
                        <div class="row mt-3">
                            <button class="btn btn-primary btn-sm" onclick="window.location.href = '@Url.Action("Edit", "Category", new { Areas = "Products" })';">Add New Category</button>
                        </div>
                        <div class="row mt-3">
                            <table class="table table-light table-bordered table-hover table-sm" id="tblCategories">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>CategoryId</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>

@section scripts {
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.5/js/jquery.dataTables.js"></script>

    <script language="javascript">
        $(document).ready(function () {
            var table = $("#tblCategories").DataTable({
                paging: true,
                responsive: true,
                serverSide: true,
                autoWidth: true,
                ajax: {
                    url: "@Url.Action("Read", "Category", new { area = "Products"})",
                    type: "POST",
                    contentType: "application/json",
                    data: function (d) {
                        return JSON.stringify(d);
                    },
                    dataSrc: function (json) {
                        console.log(json);
                        if (json.data)
                            return json.data;
                        else
                            return [];
                    }
                },
                columns: [
                    { data: "CategoryId", "autoWidth": true },
                    { data: "Name", "autoWidth": true },
                    { data: "Description", "autoWidth": true },
                    {
                        data: "CategoryId",
                        render: function (data, type, account) {
                            return '<a href="/products/category/edit/' + data + '">Edit</a>';
                        },
                        "autoWidth": true
                    }

                ],
                "language": {
                    "search": "",
                    "searchPlaceholder": "Search..."
                },
            });
        })
    </script>


}